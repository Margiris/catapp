(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{251:function(e,t,a){e.exports=a(420)},256:function(e,t,a){},257:function(e,t,a){},420:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(59),c=a.n(o),r=(a(256),a(74)),s=a(52),l=(a(257),a(19)),m=a(20),u=a(21),h=a(22),p=a(23),d=(a(443),a(440)),g=a(42),f=a(432),E=a(431),v=a(421),b=a(60),y=a.n(b),k=a(435),C=a(85),j=a(434),w=a(442),I=a(439),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).close_login=function(){return a.setState({open_login:!1})},a.open_login=function(){return a.setState({open_login:!0})},a.close_signup=function(){return a.setState({open_signup:!1})},a.open_signup=function(){return a.setState({open_signup:!0})},a.state={username:"",password:"",email:"",open_login:!1,open_signup:!1,loggedIn:!1,badCredentials:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.open_login,n=t.open_signup;return null===localStorage.getItem("jwtToken")||172!==localStorage.getItem("jwtToken").length?i.a.createElement(d.a.Menu,{position:"right"},i.a.createElement(d.a.Item,{header:!0},i.a.createElement(k.a,{open:a,size:"mini",onClose:this.close_login,trigger:i.a.createElement(C.a,{as:"a",content:"Login",icon:"sign-in",color:"blue",onClick:this.open_login})},i.a.createElement(k.a.Header,{as:"h2",style:{textAlign:"center"}},i.a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 228.118 228.118",style:{marginRight:"0.5em",fill:"black"}},i.a.createElement("path",{d:"M228.118,12.703l-68.674,13.147c-13.634-6.954-29.059-10.88-45.385-10.88c-16.326,0-31.751,3.926-45.385,10.88L0,12.703\r l15.658,83.45c-1.191,6.167-1.822,12.531-1.822,19.04c0,55.263,44.96,100.223,100.223,100.223\r c55.264,0,100.224-44.96,100.224-100.223c0-6.509-0.631-12.873-1.822-19.04L228.118,12.703z M134.029,175.022\r c-7.911,0-15.038-3.259-19.977-8.675c-4.939,5.42-12.059,8.72-19.961,8.72c-14.878,0-26.982-12.362-26.982-27.362h15\r c0,7,5.375,12.362,11.982,12.362c6.606,0,11.981-5.095,11.981-11.701l-0.107-10.694c-8.808-3.291-15.097-11.967-15.097-21.967h15\r c0,5,3.674,8.19,8.19,8.19s8.191-3.19,8.191-8.19h15c0,10-6.288,18.674-15.096,21.966l-0.107,10.651\r c0,6.53,5.375,11.68,11.981,11.68s11.981-5.297,11.981-12.297h15C161.01,162.705,148.907,175.022,134.029,175.022z"})),"Login to CatPic"),i.a.createElement(k.a.Content,null,i.a.createElement(j.a,{size:"large"},i.a.createElement(w.a,{stacked:!0},i.a.createElement(I.a,{hidden:!this.state.badCredentials,negative:!0},"Wrong username or password"),i.a.createElement(j.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}}),i.a.createElement(j.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}),i.a.createElement(v.a,{content:"Login",labelPosition:"left",icon:"sign-in",primary:!0,fluid:!0,size:"tiny",onClick:function(){var t=e.state,a=t.username,n=t.password;fetch("http://api.catpic.margiris.site:5000/login",{method:"GET",headers:{Authorization:"Basic "+btoa(a+":"+n)}}).then((function(t){t.ok?t.json().then((function(t){console.log(t),localStorage.setItem("jwtToken",t.token),e.setState({loggedIn:!0,badCredentials:!1}),e.close_login()})):e.setState({badCredentials:!0})}))}})))))),i.a.createElement(d.a.Item,{header:!0},i.a.createElement(k.a,{open:n,size:"mini",onClose:this.close_signup,trigger:i.a.createElement(C.a,{as:"a",content:"Sign Up",icon:"signup",onClick:this.open_signup})},i.a.createElement(k.a.Header,{as:"h2",style:{textAlign:"center"}},i.a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 228.118 228.118",style:{marginRight:"0.5em",fill:"black"}},i.a.createElement("path",{d:"M228.118,12.703l-68.674,13.147c-13.634-6.954-29.059-10.88-45.385-10.88c-16.326,0-31.751,3.926-45.385,10.88L0,12.703\r l15.658,83.45c-1.191,6.167-1.822,12.531-1.822,19.04c0,55.263,44.96,100.223,100.223,100.223\r c55.264,0,100.224-44.96,100.224-100.223c0-6.509-0.631-12.873-1.822-19.04L228.118,12.703z M134.029,175.022\r c-7.911,0-15.038-3.259-19.977-8.675c-4.939,5.42-12.059,8.72-19.961,8.72c-14.878,0-26.982-12.362-26.982-27.362h15\r c0,7,5.375,12.362,11.982,12.362c6.606,0,11.981-5.095,11.981-11.701l-0.107-10.694c-8.808-3.291-15.097-11.967-15.097-21.967h15\r c0,5,3.674,8.19,8.19,8.19s8.191-3.19,8.191-8.19h15c0,10-6.288,18.674-15.096,21.966l-0.107,10.651\r c0,6.53,5.375,11.68,11.981,11.68s11.981-5.297,11.981-12.297h15C161.01,162.705,148.907,175.022,134.029,175.022z"})),"Login to CatPic"),i.a.createElement(k.a.Content,null,i.a.createElement(j.a,{size:"large"},i.a.createElement(w.a,{stacked:!0},i.a.createElement(I.a,{hidden:!this.state.badCredentials,negative:!0},"Email or username already in use"),i.a.createElement(j.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}}),i.a.createElement(j.a.Input,{fluid:!0,icon:"at",iconPosition:"left",placeholder:"someone@example.com",type:"email",value:this.state.email,onChange:function(t){e.setState({email:t.target.value})}}),i.a.createElement(j.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}),i.a.createElement(v.a,{content:"Sign Up",labelPosition:"left",icon:"signup",primary:!0,fluid:!0,size:"tiny",onClick:function(){var t=e.state,a=t.username,n=t.password,i=t.email;fetch("http://api.catpic.margiris.site:5000/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:i,password:n})}).then((function(t){t.ok&&fetch("http://api.catpic.margiris.site:5000/login",{method:"GET",headers:{Authorization:"Basic "+btoa(a+":"+n)}}).then((function(t){t.ok?t.json().then((function(t){console.log(t),localStorage.setItem("jwtToken",t.token),e.setState({loggedIn:!0,badCredentials:!1}),e.close_signup()})):e.setState({badCredentials:!0})}))}))}}))))))):i.a.createElement(d.a.Menu,{position:"right"},i.a.createElement(d.a.Item,{header:!0},i.a.createElement(C.a,{as:"a",content:"Logout",icon:"sign-out",color:"red",onClick:function(){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(fetch("http://api.catpic.margiris.site:5000/logout",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("jwtToken")}}).then((function(e){localStorage.setItem("jwtToken","")})));case 2:e.setState({loggedIn:!1});case 3:case"end":return t.stop()}}))}})))}}]),t}(i.a.Component),_=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).toggleSidenav=function(){var e=a.state.sidebar_visible;document.getElementById("mySidenav").style.width=e?"0":"60%",a.setState({sidebar_visible:!e})},a.handleNavigation=function(e){a.state.activeItem=e.pathname.includes("post")?"post":"home",a.state.post_id=e.pathname.slice(6)},a.handleItemClick=function(e,t){var n=t.name;a.setState({activeItem:n}),"post"===n&&24===a.state.post_id.length?a.props.history.push("/post/"+a.state.post_id):"home"===n&&a.props.history.push("/")},a.setVisible=function(e){return a.setState({visible:e})},a.state={sidebar_visible:!0,activeItem:"",visible:!1,post_id:""},a.handleNavigation(a.props.location),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unlisten=this.props.history.listen((function(t,a){e.handleNavigation(t)})),document.getElementById("mySidenav").style.top=document.getElementById("topBar").offsetHeight+"px",this.toggleSidenav()}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"openNav",value:function(){document.getElementById("mySidenav").style.width="250px"}},{key:"closeNav",value:function(){document.getElementById("mySidenav").style.width="0"}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeItem,n=t.post_id,o=t.sidebar_visible;return i.a.createElement(d.a,{fixed:"top",pointing:!0,secondary:!0,inverted:!0,style:{backgroundColor:"#1b1c1d"}},i.a.createElement(f.a,{id:"topBar"},i.a.createElement(d.a.Item,{header:!0,style:{paddingTop:"2px",paddingBottom:"2px"}},i.a.createElement(g.a,{name:o?"close":"bars",className:"bars",onClick:this.toggleSidenav}),i.a.createElement(d.a.Menu,{id:"mySidenav",className:"sidenav"},i.a.createElement(d.a.Item,{header:!0,name:"home",active:"home"===a,onClick:this.handleItemClick},i.a.createElement(g.a,{name:"home"}),"Home"),i.a.createElement(d.a.Item,{header:!0,name:"user",active:"user"===a,onClick:this.handleItemClick},i.a.createElement(g.a,{name:"user"}),"My Profile"),i.a.createElement(d.a.Item,{header:!0,name:"post",active:"post"===a,onClick:this.handleItemClick},i.a.createElement(g.a,{name:"list"}),"Post")),i.a.createElement("svg",{width:"29",height:"29",viewBox:"0 0 228.118 228.118",style:{marginRight:"0.5em"}},i.a.createElement("path",{d:"M228.118,12.703l-68.674,13.147c-13.634-6.954-29.059-10.88-45.385-10.88c-16.326,0-31.751,3.926-45.385,10.88L0,12.703\r l15.658,83.45c-1.191,6.167-1.822,12.531-1.822,19.04c0,55.263,44.96,100.223,100.223,100.223\r c55.264,0,100.224-44.96,100.224-100.223c0-6.509-0.631-12.873-1.822-19.04L228.118,12.703z M134.029,175.022\r c-7.911,0-15.038-3.259-19.977-8.675c-4.939,5.42-12.059,8.72-19.961,8.72c-14.878,0-26.982-12.362-26.982-27.362h15\r c0,7,5.375,12.362,11.982,12.362c6.606,0,11.981-5.095,11.981-11.701l-0.107-10.694c-8.808-3.291-15.097-11.967-15.097-21.967h15\r c0,5,3.674,8.19,8.19,8.19s8.191-3.19,8.191-8.19h15c0,10-6.288,18.674-15.096,21.966l-0.107,10.651\r c0,6.53,5.375,11.68,11.981,11.68s11.981-5.297,11.981-12.297h15C161.01,162.705,148.907,175.022,134.029,175.022z"})),"CatPic"),i.a.createElement(d.a.Item,{name:"home",active:"home"===a,onClick:this.handleItemClick},i.a.createElement(g.a,{name:"home"}),"Home"),i.a.createElement(d.a.Item,{name:"user",active:"user"===a,onClick:this.handleItemClick},i.a.createElement(g.a,{name:"user"}),"My Profile"),i.a.createElement(d.a.Item,{name:"post",active:"post"===a,onClick:this.handleItemClick},i.a.createElement(g.a,{name:"list"}),"Post"),i.a.createElement(d.a.Item,{style:{minWidth:"15em"}},i.a.createElement(E.a,{fluid:!0,action:!0,size:"mini",inverted:!0,value:n,placeholder:"<post_id>",style:{marginLeft:"1.5em"},onChange:function(t){e.setState({post_id:t.target.value})}},i.a.createElement("input",null),i.a.createElement(v.a,{as:"a",href:"/post/"+this.state.post_id,name:"post",size:"mini",type:"submit",onClick:this.handleItemClick},i.a.createElement(g.a,{name:"chevron circle right"})))),i.a.createElement(S,null)))}}]),t}(i.a.Component),O=a(433),x=a(438),B=a(240),z=a(237),M=a(436),P=a(444),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={postRef:e.postRef,parent:e.parent,commentBody:"",loggedIn:null!==localStorage.getItem("jwtToken")&&172===localStorage.getItem("jwtToken").length,url:e.url},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.url,n=t.commentBody,o=t.loggedIn,c=t.parent,r=t.postRef;return i.a.createElement(j.a,{reply:!0},i.a.createElement(j.a.TextArea,{disabled:!o,value:n,onChange:function(t){e.setState({commentBody:t.currentTarget.value})}}),i.a.createElement(v.a,{disabled:!o,content:"Post Comment",labelPosition:"left",icon:"edit",primary:!0,onClick:function(){var t,i;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,y.a.awrap(fetch(a,{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("jwtToken"),"Content-Type":"application/json"},body:JSON.stringify({body:n})}));case 2:if(!(t=o.sent).ok){o.next=12;break}return e.setState({commentBody:""}),o.next=7,y.a.awrap(t.json());case 7:i=o.sent,c.setState({comments:c.state.comments.concat(i.comment)}),r.setState((function(e){return{post:Object(z.a)({},e.post,{comment_count:r.state.post.comment_count+1})}})),o.next=13;break;case 12:console.log(t);case 13:case"end":return o.stop()}}))}}))}}]),t}(i.a.Component),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={post_id:e.post_id,postRef:e.parent,commentBody:"",comments:[],url:"http://api.catpic.margiris.site:5000/post/"+e.post_id+"/comment"},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(this.state.url).then((function(t){return t.json().then((function(t){e.setState({comments:t.comments})}))}))}},{key:"render",value:function(){var e=this.state.comments;return i.a.createElement(M.a.Group,null,i.a.createElement(P.a,{as:"h3",dividing:!0},"Comments"),e.map((function(e){return i.a.createElement(M.a,{key:e.id},i.a.createElement(M.a.Content,null,i.a.createElement(M.a.Author,null,e.author),i.a.createElement(M.a.Metadata,null,i.a.createElement("div",null,e.posted_time),i.a.createElement("div",null,i.a.createElement(g.a,{name:"heart"}),e.rating)),i.a.createElement(M.a.Text,null,e.body)))})),i.a.createElement(T,{parent:this,postRef:this.state.postRef,url:this.state.url}))}}]),t}(i.a.Component),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={parent:e.parent,post:e.post},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,a=e.post,n=e.parent,o=void 0===n?a.comment_count:n.state.post.comment_count;return i.a.createElement(x.a,{fluid:!0,className:"Card"},i.a.createElement(x.a.Content,null,i.a.createElement(x.a.Header,null,i.a.createElement(r.b,{to:"/post/"+a.id,className:"a"},a.title))),i.a.createElement(B.a,{src:"http://hdqwalls.com/wallpapers/cat-green-eyes-4k-i8.jpg",href:"/post/"+a.id,ui:!1}),i.a.createElement(x.a.Content,null,i.a.createElement(x.a.Meta,null,i.a.createElement("span",{className:"time"},i.a.createElement(r.b,{to:"/user/"+a.author,className:"a"},a.author)," \xb7 ",a.posted_on))),i.a.createElement(k.a,{trigger:i.a.createElement(x.a.Content,{extra:!0},i.a.createElement(r.b,{to:"#"},i.a.createElement(g.a,{name:"comments"}),o," comment",1===o?"":"s"))},i.a.createElement(k.a.Content,null,i.a.createElement(t,{parent:this,post:a}),i.a.createElement(N,{parent:this,post_id:a.id}))))}}]),t}(i.a.Component),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={posts:[]},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unlisten=this.props.history.listen((function(t,a){e.setState({state:e.state})}));fetch("http://api.catpic.margiris.site:5000/post").then((function(t){return t.json().then((function(t){e.setState({posts:t.posts})}))}))}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){var e=this.state.posts;return i.a.createElement(f.a,{className:"main-container"},i.a.createElement(O.a,{inline:"centered",active:e===[]}),e.map((function(e){return i.a.createElement(L,{key:e.id,post:e})})))}}]),t}(i.a.Component),A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={post_id:a.props.match.params.post_id,post:Object()},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unlisten=this.props.history.listen((function(t,a){e.setState({post_id:t.pathname.slice(6)}),e.fetch()})),this.fetch()}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this,t="http://api.catpic.margiris.site:5000/post/"+this.state.post_id;fetch(t).then((function(t){return t.json().then((function(t){e.setState({post:t.post})}))}))}))},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){var e=this.state,t=e.post,a=e.post_id;return console.log(t),i.a.createElement(f.a,{className:"main-container"},i.a.createElement(L,{post:t}),i.a.createElement(N,{post_id:a}))}}]),t}(i.a.Component),H=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"test")}}]),t}(i.a.Component),U=a(437),W=function(){return i.a.createElement(w.a,{inverted:!0,vertical:!0,style:{margin:"3.5em 0em 0em",padding:"1.5em 0em"}},i.a.createElement(f.a,{textAlign:"center"},i.a.createElement(f.a,null,i.a.createElement("svg",{width:"100",height:"100",viewBox:"0 0 228.118 228.118",style:{marginRight:"0.5em"}},i.a.createElement("path",{d:"M228.118,12.703l-68.674,13.147c-13.634-6.954-29.059-10.88-45.385-10.88c-16.326,0-31.751,3.926-45.385,10.88L0,12.703\r l15.658,83.45c-1.191,6.167-1.822,12.531-1.822,19.04c0,55.263,44.96,100.223,100.223,100.223\r c55.264,0,100.224-44.96,100.224-100.223c0-6.509-0.631-12.873-1.822-19.04L228.118,12.703z M134.029,175.022\r c-7.911,0-15.038-3.259-19.977-8.675c-4.939,5.42-12.059,8.72-19.961,8.72c-14.878,0-26.982-12.362-26.982-27.362h15\r c0,7,5.375,12.362,11.982,12.362c6.606,0,11.981-5.095,11.981-11.701l-0.107-10.694c-8.808-3.291-15.097-11.967-15.097-21.967h15\r c0,5,3.674,8.19,8.19,8.19s8.191-3.19,8.191-8.19h15c0,10-6.288,18.674-15.096,21.966l-0.107,10.651\r c0,6.53,5.375,11.68,11.981,11.68s11.981-5.297,11.981-12.297h15C161.01,162.705,148.907,175.022,134.029,175.022z"}))),i.a.createElement(U.a,{relaxed:!0,inverted:!0,divided:!0,link:!0,size:"small",className:"different-font"},i.a.createElement(U.a.Item,null,"Icon made by"," ",i.a.createElement("a",{href:"https://www.flaticon.com/authors/freepik",title:"Freepik"},"Freepik")," ","from"," ",i.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")),i.a.createElement(U.a.Item,null,i.a.createElement(U.a.Header,{style:{padding:"1em 0"}},i.a.createElement(g.a,{name:"copyright"})," Margiris Burakauskas, IFF-6/10"),i.a.createElement(U.a.Content,null,"2019")))))};var F=function(){return i.a.createElement("div",null,i.a.createElement(r.a,null,i.a.createElement(s.a,{path:"/",component:_}),i.a.createElement(s.a,{exact:!0,path:"/",component:R}),i.a.createElement(s.a,{path:"/post/:post_id",component:A}),i.a.createElement(s.a,{path:"/user/:name",component:H})),i.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(419);c.a.render(i.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[251,1,2]]]);
//# sourceMappingURL=main.eceb8be7.chunk.js.map